<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>

    <style>
    h1 {
    display: inline-block;
    color: blue;
    font-family: verdana;
    font-size: 300%;
    }
    </style>
  </head>
  <body>
    <script>
      $(document).ready(function(){
      var $body = $('body');
      $body.html('');

      var $header = $("<h1>Twittler</h1>");
      $( ":header" ).css({color: "blue" });
      $header.appendTo($body);


      var index;
      var everyTwoSeconds;
      var latestIndex = 0;

      var newTweetsInterval;

      var allUsers = ['shawndrost', 'sharksforcheap', 'mracus', 'douglascalhoun'];
      var displayOnlyUser = allUsers;

      var printNewTweets = function () {
      var i = streams.home.length - 1;
      var leftOffAt = latestIndex;
        while(i >= leftOffAt){
          var tweet = streams.home[i];


              var $tweet = $("<div class=" + tweet.user + "></div>");

              if(displayOnlyUser.includes(tweet.user)) {
                $tweet.html("<strong class='" + tweet.user + "'>@" + tweet.user + '</strong>: ' + tweet.message + '<br />' + tweet.created_at + '<br />');
                $tweet.prependTo($body);
            } else {
              continue;
            }
              i -= 1;
          }
        }


    function everyTwoSeconds(){

      setInterval( function() {
          var copy = streams.home.slice();
          var latestTweetsOnly = copy.slice(latestIndex);
          latestIndex = copy.length - 1;
          printNewTweets();

        }, 2000);

}





     // var goBack = function () {
     //   window.history.back();
     // }


     function goToProfile (user) {
       clearInterval(EveryTwoSeconds());
       displayOnlyUser = [user];

       var everyoneElse = allUsers.filter( function(name) {
         return name !== user;
       });


       everyoneElse.forEach( function (user) {
         console.log(user);
         $("." + user).remove();
       });

       everyTwoSeconds();

     };

     everyTwoSeconds();

     goToProfile('mracus');



      });
    </script>
  </body>
</html>
